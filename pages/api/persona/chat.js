import OpenAI from 'openai'; export default async function handler(req,res){ if(req.method!=='POST') return res.status(405).end(); const { message } = req.body || {}; const key = process.env.OPENAI_API_KEY || null; if(!key) return res.json({ reply: 'Fallback: no OpenAI key configured.' }); const client = new OpenAI({ apiKey: key }); try{ const response = await client.chat.completions.create({ model: 'gpt-4o-mini', messages:[{role:'system',content:'You are an interviewer persona.'},{role:'user',content:message}], max_tokens:400 }); const reply = response?.choices?.[0]?.message?.content || '...'; res.json({ reply }); }catch(e){ console.error(e); res.status(500).json({ error: String(e) }); } }
